{"version":3,"file":"dxcDeals.js","sourceRoot":"","sources":["../../test/dxcDeals.ts"],"names":[],"mappings":"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","sourcesContent":["import BN from \"bn.js\";\nimport {DXCDealsContract, DXCDealsInstance} from \"../types/truffle-contracts\";\n\nconst {expectRevert, expectEvent} = require(\"@openzeppelin/test-helpers\");\nconst DXCDeals: DXCDealsContract = artifacts.require(\"./DXCDeals\");\n\ncontract(\"DXCDeals\", async accounts => {\n  let dxcDeals: DXCDealsInstance;\n  const lockPeriod = 30;\n  const platformPercentage = 10;\n\n  describe(\"Deals\", async () => {\n    beforeEach(async () => {\n      dxcDeals = await DXCDeals.new();\n      assert.isOk(await dxcDeals.initialize(lockPeriod, platformPercentage));\n    });\n\n    it(\"It should revert if contract is re-initialized\", async () => {\n      await expectRevert(\n        dxcDeals.initialize(lockPeriod, platformPercentage),\n        \"DXCDeals: Already initialized\"\n      );\n    });\n\n    it(\"should create a new deal\", async () => {\n      const did = \"001\";\n      const buyerId = \"1\";\n      const sellerId = \"2\";\n      const platformAddress = dxcDeals.address;\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      const deal = await dxcDeals.createDeal(\n        did,\n        buyerId,\n        sellerId,\n        platformAddress,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      expectEvent(deal, \"DealCreated\", {dealIndex, did});\n    });\n\n    it(\"should be able to decline the payout\", async () => {\n      const did = \"001\";\n      const buyerId = \"1\";\n      const sellerId = \"2\";\n      const platformAddress = dxcDeals.address;\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        did,\n        buyerId,\n        sellerId,\n        platformAddress,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      await dxcDeals.declinePayout(dealIndex);\n\n      const deal = await dxcDeals.getDealByIndex(dealIndex);\n\n      expect(deal.accepted).to.be.equal(false);\n    });\n\n    it(\"should throw an error if deal index is not valid during declinePayout\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      await expectRevert(dxcDeals.declinePayout(10), \"Invalid deal index\");\n    });\n\n    it(\"should be able to complete the payout\", async () => {\n      const did = \"001\";\n      const buyerId = \"1\";\n      const sellerId = \"2\";\n      const platformAddress = dxcDeals.address;\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        did,\n        buyerId,\n        sellerId,\n        platformAddress,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      await dxcDeals.completePayout(dealIndex);\n\n      const deal = await dxcDeals.getDealByIndex(dealIndex);\n\n      expect(deal.payoutCompleted).to.be.equal(true);\n    });\n\n    it(\"should throw an error if deal index is not valid during completePayout\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      await expectRevert(dxcDeals.completePayout(10), \"Invalid deal index\");\n    });\n\n    it(\"should revert calculateTransferAmount call if the deal was declined\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      await dxcDeals.declinePayout(dealIndex);\n      await expectRevert(\n        dxcDeals.calculateTransferAmount(\n          dealIndex,\n          new BN(\"55135393494483987\")\n        ),\n        \"DXCDeals: Deal was declined by the buyer\"\n      );\n    });\n\n    it(\"calculateTransferAmount - when swappedDTXEst > sellerShareInDTX\", async () => {\n      const amountInUSDT = new BN(\"1000000\"); // 1 USDT\n      const amountInDTX = new BN(\"49849900000000000\"); // 0.0498499 DTX\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n      const dealIndex = await dxcDeals.getCurrentDealIndex();\n\n      const result: [BN, BN] = await dxcDeals.calculateTransferAmount(\n        dealIndex,\n        new BN(\"45135393494483987\") // 0.045135393494483987 DTX\n      );\n\n      expect(result[0].toString()).to.be.equal(\"45135393494483987\"); // 0.04513539349 DTX\n      expect(result[1].toString()).to.be.equal(\"4714506505516013\"); // 0.004714506506 DTX\n    });\n\n    it(\"calculateTransferAmount- when platformShareInDTX < extraDTXToBeAdded\", async () => {\n      const amountInUSDT = new BN(\"1000000\"); // 1 USDT\n      const amountInDTX = new BN(\"49849900000000000\"); // 0.0498499 DTX\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n      const dealIndex = await dxcDeals.getCurrentDealIndex();\n\n      const result: [BN, BN] = await dxcDeals.calculateTransferAmount(\n        dealIndex,\n        new BN(\"50000000000000000\") // 0.05 DTX\n      );\n\n      expect(result[0].toString()).to.be.equal(\"50000000000000000\"); // 0.04513539349 DTX\n      expect(result[1].toString()).to.be.equal(\"0\"); // 0.004714506506 DTX\n    });\n\n    it(\"calculateTransferAmount - when swappedDTXEst < sellerShareInDTX\", async () => {\n      const amountInUSDT = new BN(\"1000000\"); // 1 USDT\n      const amountInDTX = new BN(\"49849900000000000\"); // 0.0498499 DTX\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n      const dealIndex = await dxcDeals.getCurrentDealIndex();\n\n      const result: [BN, BN] = await dxcDeals.calculateTransferAmount(\n        dealIndex,\n        new BN(\"40000000000000000\") // 0.04 DTX\n      );\n\n      expect(result[0].toString()).to.be.equal(\"40000000000000000\"); // 0.04 DTX\n      expect(result[1].toString()).to.be.equal(\"9849900000000000\"); // 0.0098499 DTX\n    });\n\n    it(\"should be able to edit and get the platform percentage\", async () => {\n      await dxcDeals.editPlatformPercentage(new BN(\"20\"));\n\n      expect(\n        await (await dxcDeals.getPlatformPercentage()).toString()\n      ).to.be.equal(\"20\");\n    });\n\n    it(\"should be able to edit and get the lockPeriod\", async () => {\n      await dxcDeals.editLockPeriod(new BN(\"45\"));\n\n      expect(await (await dxcDeals.getLockPeriod()).toString()).to.be.equal(\n        \"45\"\n      );\n    });\n\n    it(\"should be able to get deal by index\", async () => {\n      const did = \"001\";\n      const buyerId = \"1\";\n      const sellerId = \"2\";\n      const platformAddress = dxcDeals.address;\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        did,\n        buyerId,\n        sellerId,\n        platformAddress,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      const deal = await dxcDeals.getDealByIndex(dealIndex);\n\n      expect(deal.did.toString()).to.be.equal(\"001\");\n      expect(deal.dealIndex.toString()).to.be.equal(\"1\");\n      expect(deal.platformAddress).to.be.equal(dxcDeals.address);\n      expect(deal.amountInDTX.toString()).to.be.equal(amountInDTX.toString());\n      expect(deal.amountInUSDT.toString()).to.be.equal(amountInUSDT.toString());\n      expect(deal.accepted).to.be.equal(true);\n      expect(deal.payoutCompleted).to.be.equal(false);\n    });\n\n    it(\"should be able to get all deals for did\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"3\",\n        \"4\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const result = await dxcDeals.getDealsForDID(\"001\");\n\n      expect(result.length).to.be.equal(2);\n      expect(result[0].dealIndex).to.be.equal(\"1\");\n      expect(result[1].dealIndex).to.be.equal(\"2\");\n    });\n\n    it(\"should revert createDeals if the msg.sender is not the owner\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await expectRevert(\n        dxcDeals.createDeal(\n          \"001\",\n          \"1\",\n          \"2\",\n          dxcDeals.address,\n          amountInUSDT,\n          amountInDTX,\n          {from: accounts[1]}\n        ),\n        \"Ownable: caller is not the owner\"\n      );\n    });\n\n    it(\"should revert declinePayout if the msg.sender is not the owner\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      await expectRevert(\n        dxcDeals.declinePayout(dealIndex, {from: accounts[1]}),\n        \"Ownable: caller is not the owner\"\n      );\n    });\n\n    it(\"should revert completePayout if the msg.sender is not the owner\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      await expectRevert(\n        dxcDeals.completePayout(dealIndex, {from: accounts[1]}),\n        \"Ownable: caller is not the owner\"\n      );\n    });\n\n    it(\"should revert calculateTransferAmount if the msg.sender is not the owner\", async () => {\n      const amountInUSDT: BN = web3.utils.toWei(new BN(1000));\n      const amountInDTX: BN = web3.utils.toWei(new BN(50));\n\n      await dxcDeals.createDeal(\n        \"001\",\n        \"1\",\n        \"2\",\n        dxcDeals.address,\n        amountInUSDT,\n        amountInDTX\n      );\n\n      const dealIndex: BN = await dxcDeals.getCurrentDealIndex();\n\n      await expectRevert(\n        dxcDeals.calculateTransferAmount(\n          dealIndex,\n          new BN(\"55135393494483987\"),\n          {from: accounts[1]}\n        ),\n        \"Ownable: caller is not the owner\"\n      );\n    });\n\n    it(\"should revert editPlatformPercentage if the msg.sender is not the owner\", async () => {\n      await expectRevert(\n        dxcDeals.editPlatformPercentage(20, {\n          from: accounts[1]\n        }),\n        \"Ownable: caller is not the owner\"\n      );\n    });\n\n    it(\"should revert editLockPeriod if the msg.sender is not the owner\", async () => {\n      await expectRevert(\n        dxcDeals.editLockPeriod(20, {\n          from: accounts[1]\n        }),\n        \"Ownable: caller is not the owner\"\n      );\n    });\n  });\n});\n"]}